set nu				"显示行号"
"自适应不同语言的智能缩进"
filetype indent on 
set expandtab	"将制表符扩展为空格"
set tabstop=4	"设置编辑时制表符占用空格数"
set shiftwidth=4	"设置格式化时制表符占用空格数"
set softtabstop=4   "让vim把连续数量的空格视为一个制表符"
inoremap ( ()<ESC>i
inoremap [ []<ESC>i
inoremap { {<CR>}<ESC>		"花括号自动补全及缩进"
inoremap ' ''<ESC>i
inoremap " ""<ESC>i
"基于缩进或语法进行代码折叠"
set foldmethod=indent   
set foldmethod=syntax
"启动vim时关闭折叠代码"
set nofoldenable
"禁止光标闪烁"
set gcr=a:block-blinkon0
set hlsearch			"高亮显示所查关键字符"
set mouse=a			"Enable mouse usage (all modes)"


"括号自动删除"
function! RemovePairs()
	let l:line = getline(".")
	let l:previous_char = l:line[col(".")-1]
	if index(["(","[","{"],l:previous_char) != -1
		let l:original_pos = getpos(".")
		execute "normal %"
		let l:new_pos = getpos(".")

		if l:original_pos == l:new_pos
			execute "normal! a\<BS>"
			return
		end
		let l:line2 = getline(".")
		if len(l:line2) == col(".")
			execute "normal! v%xa"
		else 
			execute "normal! v%xi"
		end
	else
		execute "normal! a\<BS>"
	end
endfunction

inoremap <BS> <ESC>:call RemovePairs()<CR>a


"忽略多余右括号"
function! RemoveNextDoubleChar(char)
	let l:line = getline(".")
	let l:next_char = l:line[col(".")] "
	if a:char == l:next_char
		execute "normal! l"
	else
		execute "normal! i" . a:char . "" 
	end
endfunction

inoremap ) <ESC>:call RemoveNextDoubleChar(')')<CR>a
inoremap ] <ESC>:call RemoveNextDoubleChar(']')<CR>a
inoremap } <ESC>:call RemoveNextDoubleChar('}')<CR>a

#安装markdown插件
set nocompatible    

set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()

Plugin 'vundleVim/vundle.vim'

Plugin 'godlygeek/tabular'

Plugin 'plasticboy/vim-markdown'

Plugin 'suan/vim-instant-markdown'

#快速开关注释
Plugin 'scrooloose/nerdcommenter'


call vundle#end()
filetype plugin indent on
filetype plugin on

"默认八进制"
set nrformats=

"保存文件自动执行ctags"
"audocmd BufWritePost * call system("ctags -R")

"在执行查找前预览第一处匹配"
set incsearch

"Automatically save before commands like :next and :make
set autowrite

"statusline"
set statusline=
set statusline+= %7*\[%n]   "buffernr"
set statusline+=%1*\ %<%F\  "file lacation"
set statusline+=%8*\ %=\ row:%l/%L\ (%03p%%)\   "cur line / total line(xx%)"
set laststatus=2    "status line shown as the second line"

"color"
colorscheme solarized

"foldmethod"
set fdm=marker

"templates VIMHOME is as deep as vimrc
autocmd BufNewFile * silent! 0r ./VIMHOME/templates/%:e.tpl
"<c-j> fix the next position"
nnoremap <c-j> /<+.\{-1,}+><cr>c/+>/e<cr>
nnoremap <c-j> <ESC>/<+.\{-1,}+><cr>c/+>/e<cr>
"highlight the placeholder"
match Todo /<+.\++>/

"fori"
iabbrev <buffer> fori for (<+init+>; <+condition+>; <+change+>) { 

"to map Caps Lock to ESC and avoid working outside of vim"
au VimEnter * silent! !xmodmap -e 'clear Lock' -e 'keycode 0x42 = Escape'
au VimLeave * silent! !xmodmap -e 'clear Lock' -e 'keycode 0x42 = Caps_Lock'

